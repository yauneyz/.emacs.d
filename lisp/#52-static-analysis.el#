
(use-package format-all
  :config
  (setq-default format-all-formatters
                '((clojure-mode . "cljfmt")
		  (clojurescript-mode . "cljfmt")
		  (clojurec-mode . "cljfmt")
		  (python-mode . "black")
		  (typescript-mode . "prettier")
		  (emacs-lisp-mode . emacs-lisp-format))))

(defun my/format-on-save ()
  "Format buffer on save if a formatter is available."
  (when (and (fboundp 'format-all--get-formatter) (format-all--get-formatter))
    (format-all-buffer)))
(add-hook 'after-save-hook #'my/format-on-save)